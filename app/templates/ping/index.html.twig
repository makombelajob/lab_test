{% extends 'base.html.twig' %}

{% block title %}Profil - PentestLab
{% endblock %}
{% block javascripts %}
	<script src="{{ asset('js/directTimer.js') }}" defer></script>
{% endblock %}


{% block body %}
	<div class="scan-container">
		{% include '_partials/_aside.html.twig' %}
		<!-- Main Content -->
		<main
			class="scan-content">
			<!-- Ping Section -->
			<section id="ping-section" class="content-section active">
				<div class="section-header">
					<h2 class="section-title">
						<i class="bi bi-wifi me-2"></i>Ping
					</h2>
					<p class="section-description">
						Testez la connectivité réseau en envoyant des paquets ICMP à une adresse IP ou un domaine.
					</p>
				</div>
				{% for message in app.flashes('success') %}
					<div class="alert alert-success">{{ message }}</div>
				{% endfor %}
				{% for message in app.flashes('danger') %}
					<div class="alert alert-danger">{{ message }}</div>
				{% endfor %}

				<div class="load-timer">
					<span id="load-timer"></span>
				</div>
				{# Ping section #}
				<div class="ping-container">
					<div class="form-group">
						{{  form_start(form, { attr: { id: 'ping-form' }}) }}
						<label for="ping-target" class="form-label">
							<i class="bi bi-globe me-2"></i>Adresse IP ou Domaine
						</label>
						<div class="input-group">
							{{ form_row(form.hostname, { attr: { id: 'ping-target' }}) }}
							<button type="submit" class="btn btn-primary-custom">
								<i class="bi bi-send-fill me-2"></i>Envoyer
							</button>


						</div>
						<small class="form-text text-muted">
							Entrez une adresse IP (ex: 192.168.1.1) ou un nom de domaine (ex: google.com)
						</small>
					</div>
					{{  form_end(form) }}

					{% if output %}
						<div id="ping-results" class="ping-results">
							<div class="results-header">
								<h4 class="results-title">
									<i class="bi bi-activity me-2"></i>RésultatsS
								</h4>
								<button type="button" class="btn btn-sm btn-outline-secondary" id="action-button">
									<i class="bi bi-arrow-right-circle me-1"></i>
									<span></span>
								</button>
							</div>

							<div class="results-content">
								<h3>Résultat du Ping :</h3>
								<pre id="ping-output" class="ping-output">{{ output|e }}</pre>
							</div>
						</div>
					{% endif %}
				</div>
			</section>
		</main>
	</div>

{% endblock %}
