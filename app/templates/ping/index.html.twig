{% extends 'base.html.twig' %}

{% block title %}Profil - PentestLab
{% endblock %}
{% block javascripts %}
    <script src='{{ asset("js/nextBtn.js") }}' defer ></script>
{% endblock %}

{% block body %}
    <div class="profile-container">
        {% include '_partials/_aside.html.twig' %}
        <!-- Main Content -->
        <main
                class="profile-content">
            <!-- Ping Section -->
            <section id="ping-section" class="content-section active">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="bi bi-wifi me-2"></i>Ping
                    </h2>
                    <p class="section-description">
                        Testez la connectivité réseau en envoyant des paquets ICMP à une adresse IP ou un domaine.
                    </p>
                </div>
                {% for message in app.flashes('success') %}
                    <div class="alert alert-success">{{ message }}</div>
                {% endfor %}
                {% for message in app.flashes('danger') %}
                    <div class="alert alert-danger">{{ message }}</div>
                {% endfor %}


                {# Ping section #}
                <div class="ping-container">
                    <div class="form-group">
                        {{  form_start(form, { attr: { id: 'ping-form' }}) }}
                        <label for="ping-target" class="form-label">
                            <i class="bi bi-globe me-2"></i>Adresse IP ou Domaine
                        </label>
                        <div class="input-group">
                            {{ form_row(form.hostname, { attr: { id: 'ping-target' }}) }}
                            <button type="submit" class="btn btn-primary-custom">
                                <i class="bi bi-send-fill me-2"></i>Envoyer
                            </button>


                        </div>
                        <small class="form-text text-muted">
                            Entrez une adresse IP (ex: 192.168.1.1) ou un nom de domaine (ex: google.com)
                        </small>
                    </div>
                    {{  form_end(form) }}

                    {% if output %}
                        <div id="ping-results" class="ping-results">
                            <div class="results-header">
                                <h4 class="results-title">
                                    <i class="bi bi-activity me-2"></i>Résultats
                                </h4>
                                <button type="button" class="btn btn-sm btn-outline-secondary" id="action-button">
                                    <i class="bi bi-arrow-right-circle me-1"></i>
                                    <span></span>
                                </button>
                            </div>

                            <div class="results-content">
                                <h3>Résultat du Ping :</h3>
                                <pre id="ping-output" class="ping-output">{{ output|e }}</pre>
                            </div>
                        </div>
                    {% endif %}
                </div>
            </section>

            <!-- Placeholder sections for other options -->
            <section id="reconn-section" class="content-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="bi bi-search me-2"></i>Reconnaissance
                    </h2>
                    {% if output %}
                        <div class="results-content">
                            <h3>Résultat du Reconn :</h3>
                            <pre id="ping-output" class="ping-output">{{ output|e }}</pre>
                        </div>
                    {% endif %}
                </div>
            </section>

            <section id="scan-section" class="content-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="bi bi-radar me-2"></i>Scan
                    </h2>
                    <p class="section-description">Section en cours de développement...</p>
                </div>
            </section>

            <section id="exploit-section" class="content-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="bi bi-bug me-2"></i>Exploit
                    </h2>
                    <p class="section-description">Section en cours de développement...</p>
                </div>
            </section>

            <section id="switch-section" class="content-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="bi bi-arrow-left-right me-2"></i>Switch
                    </h2>
                    <p class="section-description">Section en cours de développement...</p>
                </div>
            </section>

            <section id="post-exploit-section" class="content-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="bi bi-terminal me-2"></i>Post-Exploit
                    </h2>
                    <p class="section-description">Section en cours de développement...</p>
                </div>
            </section>

            <section id="clean-section" class="content-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="bi bi-broom me-2"></i>Clean
                    </h2>
                    <p class="section-description">Section en cours de développement...</p>
                </div>
            </section>

            <section id="rapport-section" class="content-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="bi bi-file-earmark-text me-2"></i>Rapport
                    </h2>
                    <p class="section-description">Section en cours de développement...</p>
                </div>
            </section>

            <section id="profil-section" class="content-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="bi bi-person-circle me-2"></i>Profil
                    </h2>
                    <p class="section-description">Section en cours de développement...</p>
                </div>
            </section>
        </main>
    </div>

    <script>
        // Navigation
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const sectionId = this.getAttribute('data-section');

                // Mettre à jour la navigation active
                document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
                this.closest('.nav-item').classList.add('active');

                // Afficher la section correspondante
                document.querySelectorAll('.content-section').forEach(section => {
                    section.classList.remove('active');
                });

                const targetSection = document.getElementById(sectionId + '-section');
                if (targetSection) {
                    targetSection.classList.add('active');
                }
            });
        });

    </script>

{% endblock %}
